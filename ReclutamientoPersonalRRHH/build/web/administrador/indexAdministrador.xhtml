<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html" id="fview"> 

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <ui:debug />
        <f:metadata>
            <ui:insert name="metadata" />
        </f:metadata>
        <h:head>

            <link href="../css/default.css" rel="stylesheet" type="text/css" />

            <title><ui:insert name="title">Reclutamiento Personal</ui:insert>
            </title>

            <script src="../highcharts-4.2.6/js/highcharts.js"></script>
            <script src="../highcharts-4.2.6/js/modules/exporting.js"></script>


        </h:head>
        <h:body id="body2" style="font-size: 12px;">
            <h:outputText value="USUARIO ACTUAL: #{controllerAccesoSistema.usuarioModuloBean.codUsuarioGlobal} #{!(controllerAccesoSistema.usuarioModuloBean.codUsuarioGlobal eq '')}"></h:outputText>
            <p:outputPanel rendered="#{controllerAccesoSistema.usuarioModuloBean.codUsuarioGlobal eq ''}">
                <h:outputText value="Su sesión ha caducado, debe iniciar sesión nuevamente"></h:outputText>
                <br/>
                <h:form>
                    <p:commandButton value="Volver a iniciar sesión" 
                                     icon="ui-icon-refresh" 
                                     title="Volver a iniciar sesión" 
                                     style="vertical-align: bottom;height: 50px;font-size: 10px;"
                                     actionListener="#{controllerAccesoSistema.redirect_homePage()}" 
                                     >

                    </p:commandButton>
                </h:form>
            </p:outputPanel>
            <p:outputPanel rendered="#{!(controllerAccesoSistema.usuarioModuloBean.codUsuarioGlobal eq '')}">
                <p:layout  id="template" fullPage="true" > 
                    <p:layoutUnit position="north" 
                                  size="100" 
                                  resizable="false" 
                                  closable="false" 
                                  collapsible="true"
                                  id="panel_menu"

                                  >


                        <h:form id="formHeader">
                            <h:panelGrid columns="2" 
                                         style="border-style: hidden !important ;
                                         width: 100%;
                                         border-collapse: collapse;"
                                         >
                                <p:panel style="border-style: hidden !important;">
                                    <p:graphicImage url="../img/logocofar.png" height="40" style="vertical-align: middle; ">
                                    </p:graphicImage>
                                    <p:graphicImage url="../img/rec_de_per.png" height="55" style="vertical-align: middle; ">
                                    </p:graphicImage>

                                    <br />
                                    <h:outputText value="Administración del Sistema" style=" color: #336699;font-size: 16px;"></h:outputText>
                                </p:panel>
                                <p:panel style="border-style: hidden !important; text-align: right; background-color: transparent; " >
                                    <p:commandButton value="#{controllerAccesoSistema.usuarioModuloBean.nombre_completo} #{controllerAccesoSistema.usuarioModuloBean.apPaternoUsuarioGlobal}, Bienvenido"  
                                                     icon="ui-icon-person" 
                                                     title="Editar Usuario" 
                                                     style="vertical-align: bottom;height: 50px;font-size: 13px;"/>

                                    <p:commandButton value="Logout" 
                                                     icon="ui-icon-extlink" 
                                                     title="Salir del Sistema" 
                                                     style="vertical-align: bottom;height: 50px;font-size: 13px;"
                                                     actionListener="#{controllerAccesoSistema.redirect_homePage()}" 
                                                     >
                                        <p:confirm header="Confirmación" 
                                                   message="Esta seguro de Salir del Sistema?" 
                                                   icon="ui-icon-alert" />
                                    </p:commandButton>
                                    <p:confirmDialog global="true" 
                                                     showEffect="fade" 
                                                     hideEffect="explode" 
                                                     width="400">
                                        <p:commandButton value="Si" 
                                                         type="button" 
                                                         styleClass="ui-confirmdialog-yes" 
                                                         icon="ui-icon-check" 
                                                         />
                                        <p:commandButton value="No" 
                                                         type="button" 
                                                         styleClass="ui-confirmdialog-no" 
                                                         icon="ui-icon-close" />
                                    </p:confirmDialog>
                                </p:panel>
                            </h:panelGrid>
                            <p:separator></p:separator>
                        </h:form>

                    </p:layoutUnit>



                    <p:layoutUnit position="center" id="ccont" styleClass="layoutUnitCenter">


                        <h:form id="formContent">
                            <p:toolbar >
                                <f:facet name="left">
                                    <p:commandButton value="Registrar Nuevo Postulante"
                                                     actionListener="#{controller_Administrador.actionListener_nuevoPostulante()}" 
                                                     update="@form @widgetVar(dlgNuevoPostulante)" 
                                                     title="Genera un nuevo registro de un postulante." 
                                                     styleClass="btn btn-success"
                                                     icon="ui-icon-plus"
                                                     >
                                    </p:commandButton>
                                    <p:commandButton value="Configuración Evaluaciones"
                                                     actionListener="#{controller_Administrador.actionListener_nuevoPostulante()}" 
                                                     update="@form @widgetVar(dlgNuevoPostulante)" 
                                                     title="Genera un nuevo registro de un postulante." 
                                                     styleClass="btn btn-success"
                                                     icon="ui-icon-gear"
                                                     rendered="#{controllerAccesoSistema.perfil_administrador}"
                                                     >
                                    </p:commandButton>
                                </f:facet>
                            </p:toolbar>
                           
                            <center>
                                
                                
                                <p:dataTable value="#{controller_Administrador.listadoPostulantes}" 
                                             var="data"
                                             id="dataPostulantes" 
                                             widgetVar="listPostulantes"
                                             paginator="true" 
                                             rows="10" 
                                             filteredValue="#{controller_Administrador.listadoPostulantesFilter}" 
                                             style="font-size: 10px; width: 95%;"
                                             scrollable="true"
                                             scrollWidth="95%"
                                             rowKey="#{data.cod_postulante}" 
                                             paginatorPosition="bottom"
                                             emptyMessage="NO existen registros de postulantes para los parámetros especificados.">
                                    <f:facet name="header">
                                        <div align="left">
                                            <h:outputText value="Listado de Postulantes"></h:outputText>
                                        </div>
                                    </f:facet>
                                    <p:column headerText="Código Postulante" 
                                              filterBy="#{data.cod_postulante}" 
                                              filterMatchMode="contains" 
                                              width="30"

                                              >
                                        <f:facet name="header">
                                            <h:outputText value="COD." style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText  value="#{data.cod_postulante}"  />
                                    </p:column>
                                    <p:column headerText="Estado Postulante" width="60">
                                        <f:facet name="header">
                                            <h:outputText value="Estado" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.cod_estado == 1?'REGISTRADO':(data.cod_estado == 2?'ACTUALIZADO':'BLOQUEADO')}"
                                                      style="#{data.cod_estado == 1?'background-color:#FEFCA9; color:#B09614;':(data.cod_estado == 2?'background-color:#CEF6E3; color:#21610B;':'background-color: #F5677E; color:#FFFFFF;')}"

                                                      >
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Fecha Registro"
                                              width="60">
                                        <f:facet name="header">
                                            <h:outputText value="Fecha Registro" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.fecha_registro}"  >
                                            <f:convertDateTime pattern="dd/MM/yyyy HH:mm" />
                                        </h:outputText>
                                    </p:column>


                                    <p:column headerText="Nro. Identificación" 
                                              filterBy="#{data.numid}" 
                                              filterMatchMode="contains"
                                              width="100"
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Nro. Identificación" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.numid}"  />
                                    </p:column>

                                    <p:column headerText="Apellido Paterno" 
                                              filterBy="#{data.ap_paterno}" 
                                              filterMatchMode="contains"
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Apellido Paterno" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.ap_paterno}"  />
                                    </p:column>

                                    <p:column headerText="Apellido Materno" 
                                              filterBy="#{data.ap_materno}" 
                                              filterMatchMode="contains"
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Apellido Materno" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.ap_materno}"  />
                                    </p:column>
                                    <p:column headerText="Nombre Completo" 
                                              filterBy="#{data.nombres}" 
                                              filterMatchMode="contains"
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Nombre Completo" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.nombres}"  />
                                    </p:column>
                                    <p:column headerText="Sexo" 
                                              width="35"

                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Género" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.sexo}">
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Datos Acceso" 
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Datos Acceso" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="[#{data.nombre_usuario}], [#{data.password}]">
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Area Empresa" 
                                              filterBy="#{data.area.nombreAreaEmpresa}" 
                                              filterMatchMode="contains"
                                              rendered="#{controllerAccesoSistema.perfil_administrador}">
                                        <f:facet name="header">
                                            <h:outputText value="Area Empresa" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.area.nombreAreaEmpresa}"  />
                                    </p:column>
                                    <p:column headerText="Cargo al que postula" 
                                              filterBy="#{data.cargo.descripcion_cargo}" 
                                              filterMatchMode="contains"
                                              rendered="#{controllerAccesoSistema.perfil_administrador}">
                                        <f:facet name="header">
                                            <h:outputText value="Cargo al que postula" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <h:outputText value="#{data.cargo.descripcion_cargo}"  />
                                    </p:column>
                                    <p:column style="width:32px;text-align: center" 
                                              headerText="Evaluación CPS" 
                                              width="100"
                                              rendered="#{controllerAccesoSistema.perfil_administrador}"
                                              >
                                        <f:facet name="header">
                                            <h:outputText value="Evaluación CPS" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <p:menuButton value="Detalles CPS" iconPos="ui-icon-search" 
                                                      rendered="#{data.estado_cps.cod_estado==2}">
                                            <p:menuitem update=":formContent:carDetail" 
                                                        oncomplete="PF('carDialog').show()" 

                                                        title="View"
                                                        value="Respuestas"
                                                        icon="ui-icon-search"
                                                        >
                                                <f:setPropertyActionListener value="#{data}" target="#{controller_Administrador.selectedPostulante}" />
                                            </p:menuitem>

                                            <p:menuitem update=":formContent:resDetail" oncomplete="PF('resDialog').show()" icon="ui-icon-search" 
                                                        title="View"
                                                        value="Resultados"
                                                        >
                                                <f:setPropertyActionListener value="#{data}" target="#{controller_Administrador.selectedPostulante}" />
                                            </p:menuitem>
                                        </p:menuButton> 
                                        <h:outputText value="#{data.estado_cps.cod_estado!=0?data.estado_cps.nombre_estado:'NO CORRESPONDE'}" 
                                                      rendered="#{data.estado_cps.cod_estado!=2}"
                                                      style="font-weight: bold;"></h:outputText>
                                    </p:column>


                                    <p:column style="width:32px;text-align: center" 
                                              headerText="Evaluación IPV" 
                                              width="100"
                                              rendered="#{controllerAccesoSistema.perfil_administrador}">
                                        <f:facet name="header">
                                            <h:outputText value="Evaluación IPV" style="font-size: 12px;"></h:outputText>
                                        </f:facet>
                                        <p:menuButton value="Detalles IPV" iconPos="ui-icon-search" 
                                                      rendered="#{data.estado_ipv.cod_estado==2}">
                                            <p:menuitem update=":formContent:respDetailIPV" 
                                                        oncomplete="PF('respDialogIPV').show()" 

                                                        title="View"
                                                        value="Respuestas"
                                                        icon="ui-icon-search"
                                                        >
                                                <f:setPropertyActionListener value="#{data}" target="#{controller_Administrador.selectedPostulante}" />
                                            </p:menuitem>
                                            <p:menuitem update=":formContent:resDetailIPV" oncomplete="PF('resDialogIPV').show()" icon="ui-icon-search" 
                                                        title="View"
                                                        value="Resultados"
                                                        >
                                                <f:setPropertyActionListener value="#{data}" target="#{controller_Administrador.selectedPostulante}" />
                                            </p:menuitem>
                                        </p:menuButton>
                                        <h:outputText value="#{data.estado_ipv.cod_estado!=0?data.estado_ipv.nombre_estado:'NO CORRESPONDE'}" 
                                                      rendered="#{data.estado_ipv.cod_estado!=2}"
                                                      style="font-weight: bold;"></h:outputText>

                                    </p:column>
                                </p:dataTable>
                            </center>

                            <p:dialog header="Detalle Respuestas CPS" widgetVar="carDialog" modal="false" showEffect="fade" hideEffect="fade" resizable="false" width="450">
                                <p:outputPanel id="carDetail" style="text-align:center;">
                                    <p:panelGrid  columns="2" rendered="#{not empty controller_Administrador.selectedPostulante}" columnClasses="label,value">
                                        <f:facet name="header">
                                            <h:outputText value="Detalle"/>
                                            <h:outputText value="#{controller_Administrador.cargarListado}"/>

                                        </f:facet>

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.numid}" />

                                        <h:outputText value="AP Paterno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_paterno}" />

                                        <h:outputText value="AP Materno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_materno}" />
                                        <h:outputText value="Nombre Completo" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.nombres}" />


                                    </p:panelGrid>

                                    <p:dataTable value="#{controller_Administrador.listadoRespuestas}" var="resp"
                                                 scrollable="true"  scrollHeight="400">
                                        <f:facet name="header">
                                            <div align="left">
                                                <p:commandButton actionListener="#{controller_Administrador.action_verRespuestasPDF()}" 
                                                                 value="Generar Informe en formato PDF "
                                                                 update="@form @widgetVar(dlgPDF)" 
                                                                 title="Ver PDF" 
                                                                 icon="ui-icon-search"
                                                                 >
                                                </p:commandButton>
                                            </div>
                                        </f:facet>
                                        <p:column headerText="Nro. Pregunta" width="100">
                                            <h:outputText value="#{resp.cod_pregunta}"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Verdadero" width="100">
                                            <h:outputText value="#{resp.respuesta==1?'V':''}"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Falso" width="100">
                                            <h:outputText value="#{resp.respuesta==2?'F':''}"></h:outputText>
                                        </p:column>
                                    </p:dataTable>
                                </p:outputPanel>
                            </p:dialog>

                            <p:dialog header="Detalle Evaluación CPS" widgetVar="evalDialog" modal="false" showEffect="fade" hideEffect="fade" resizable="false" width="600">
                                <p:outputPanel id="evalDetail" style="text-align:center;">
                                    <p:panelGrid  columns="2" rendered="#{not empty controller_Administrador.selectedPostulante}" columnClasses="label,value">
                                        <f:facet name="header">
                                            <h:outputText value="Detalle"/>
                                            <h:outputText value="#{controller_Administrador.cargarTabulacion1}"/>

                                        </f:facet>

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.numid}" />

                                        <h:outputText value="AP Paterno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_paterno}" />

                                        <h:outputText value="AP Materno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_materno}" />
                                        <h:outputText value="Nombre Completo" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.nombres}" />


                                    </p:panelGrid>
                                    <p:dataTable value="#{controller_Administrador.listadoTabulacion1}" var="eval"
                                                 scrollable="true"  scrollHeight="400">

                                        <p:column headerText="Numero" width="50">
                                            <h:outputText value="#{eval.numero}"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Descripción Variable" width="150">
                                            <h:outputText value="#{eval.nombre_largo}"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Variable" width="100">
                                            <h:outputText value="#{eval.nombre}"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Valoración" width="100">
                                            <h:outputText value="#{eval.valor}"></h:outputText>
                                        </p:column>

                                    </p:dataTable>
                                </p:outputPanel>
                            </p:dialog>

                            <p:dialog header="Resultados Evaluación CPS" 
                                      widgetVar="resDialog" modal="false" 
                                      showEffect="fade" hideEffect="fade" 
                                      resizable="false" width="800" height="400"
                                      >
                                <p:outputPanel id="resDetail" style="text-align:center;" >
                                    <p:panelGrid  columns="2" rendered="#{not empty controller_Administrador.selectedPostulante}" columnClasses="label,value">
                                        <f:facet name="header">
                                            <h:outputText value="Postulante"/>
                                            <h:outputText value="#{controller_Administrador.cargarResultadosEvaluacion}"/>

                                        </f:facet>

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.numid}" />

                                        <h:outputText value="AP Paterno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_paterno}" />

                                        <h:outputText value="AP Materno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_materno}" />
                                        <h:outputText value="Nombre Completo" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.nombres}" />

                                        <h:outputText value="TOTAL PRUEBA: " style="font-weight: bold; font-size: 16px;" rendered="false" />
                                        <h:outputText value="#{controller_Administrador.total_prueba}" 
                                                      style="font-weight: bold; font-size: 18px; color: blue;" rendered="false"/>

                                    </p:panelGrid>
                                    <script type="text/javascript">
                                        $(function () {
                                            var tabla = document.getElementById('formContent:resultID_data');
                                            var datos = new Array();
                                            var cont = 0;
                                            for (var i in tabla.rows) {
                                                console.log(i);
                                                cont++;
                                                try {
                                                    datos.push([parseInt(tabla.rows[i].cells[0].innerHTML), parseInt(tabla.rows[i].cells[3].innerHTML)]);
                                                } catch (e) {
                                                }
                                            }
                                            console.log(datos.toString());

                                            $('#container').highcharts({
                                                chart: {
                                                    type: 'spline',
                                                    inverted: true
                                                },
                                                title: {
                                                    text: 'Detalle de evaluación'
                                                },
                                                subtitle: {
                                                    text: 'Resultados obtenidos'
                                                },
                                                xAxis: {
                                                    reversed: false,
                                                    title: {
                                                        enabled: true,
                                                        text: 'Escalas'
                                                    },
                                                    labels: {
                                                        formatter: function () {
                                                            return this.value + '';
                                                        }
                                                    },
                                                    maxPadding: 0.05,
                                                    showLastLabel: true
                                                },
                                                yAxis: {
                                                    title: {
                                                        text: 'Valores'
                                                    },
                                                    labels: {
                                                        formatter: function () {
                                                            return this.value + '.';
                                                        }
                                                    },
                                                    lineWidth: 2
                                                },
                                                legend: {
                                                    enabled: false
                                                },
                                                tooltip: {
                                                    headerFormat: '<b>{series.name}</b><br/>',
                                                    pointFormat: '{point.x} : {point.y}'
                                                },
                                                plotOptions: {
                                                    spline: {
                                                        marker: {
                                                            enable: false
                                                        }
                                                    }
                                                },
                                                series: [{
                                                        name: 'Escalas',
                                                        //data: [[0, 15], [10, -50], [20, -56.5], [30, -46.5], [40, -22.1],
                                                        //   [50, -2.5], [60, -27.7], [70, -55.7], [80, -76.5]]
                                                        data: datos
                                                    }]
                                            });

                                        });
                                    </script>
                                    <div id="container" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>

                                    <p:panelGrid columns="2">
                                        <p:dataTable value="#{controller_Administrador.listadoResultadosEvaluacion}" var="res"
                                                     scrollable="true"  scrollHeight="400" widgetVar="result" id="resultID">

                                            <f:facet name="header">
                                                <div align="left">
                                                    <p:commandButton actionListener="#{controller_Administrador.action_verEvaluacionPDF()}" 
                                                                     value="Generar Informe en formato PDF "
                                                                     update="@form @widgetVar(dlgPDFEval)" 
                                                                     title="Ver PDF" 
                                                                     icon="ui-icon-search"
                                                                     >
                                                    </p:commandButton>
                                                </div>
                                            </f:facet>
                                            <p:column headerText="Numero" width="50">
                                                <h:outputText value="#{res.numero}"></h:outputText>
                                            </p:column>
                                            <p:column headerText="Descripción Variable" width="150">
                                                <h:outputText value="#{res.nombre_largo}"></h:outputText>
                                            </p:column>
                                            <p:column headerText="Variable" width="100">
                                                <h:outputText value="#{res.nombre}"></h:outputText>
                                            </p:column>
                                            <p:column headerText="Valoración" width="100">
                                                <h:outputText value="#{res.valor}"></h:outputText>
                                            </p:column>

                                        </p:dataTable>

                                    </p:panelGrid>
                                    <p:chart type="line" model="#{chartView.lineModel2}" style="height:400px;width: 600px;" rendered="false"/>

                                </p:outputPanel>
                            </p:dialog>

                            <p:dialog header="Resultados Evaluación IPV" 
                                      widgetVar="resDialogIPV" modal="false" 
                                      showEffect="fade" hideEffect="fade" 
                                      resizable="false" width="800" height="500"
                                      >
                                <p:outputPanel id="resDetailIPV" style="text-align:center;" >
                                    <p:panelGrid  columns="2" rendered="#{not empty controller_Administrador.selectedPostulante}" columnClasses="label,value">
                                        <f:facet name="header">
                                            <h:outputText value="Postulante"/>
                                            <h:outputText value="#{controller_Administrador.cargarLineModel}"></h:outputText>

                                        </f:facet> 

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.numid}" />

                                        <h:outputText value="Nombre Completo" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_paterno} #{controller_Administrador.selectedPostulante.ap_materno} #{controller_Administrador.selectedPostulante.nombres}" />



                                    </p:panelGrid>
                                    <center>
                                        <p:chart type="line" 
                                                 model="#{controller_Administrador.lineModel}" 
                                                 style="height:400px;width: 600px;" 
                                                 rendered="true"    
                                                 widgetVar="chart_1"
                                                 id="chart_1"/>
                                    </center> 
                                    <p:chart type="line" 
                                             model="#{controller_Administrador.lineModelExportImage}" 
                                             style="height:400px;width: 600px;position: absolute; left: 0px; top: 0px; visibility: hidden;" 
                                             rendered="true"    
                                             widgetVar="chart"
                                             id="chart"/>


                                    <p:commandButton actionListener="#{controller_Administrador.action_verEvaluacionIPVPDF()}" 
                                                     value="Generar Informe en formato PDF "
                                                     update="@form @widgetVar(dlgPDFEvalIPV)" 
                                                     title="Ver PDF" 
                                                     icon="ui-icon-search"
                                                     onclick="exportChart();"
                                                     >
                                    </p:commandButton>
                                    <p:commandButton id="exp" value="Export" icon="ui-icon-extlink"
                                                     onclick="exportChart();"
                                                     actionListener="#{controller_Administrador.submittedBase64Str()}" rendered="false"/>
                                    <h:inputHidden id="b64" value="#{controller_Administrador.base64Str}" />
                                    <script type="text/javascript">
                                        function exportChart() {
                                            // exportAsImage() will return a base64 png encoded string
                                            console.log("export chart");
                                            img = PF('chart').exportAsImage();

                                            document.getElementById('formContent:b64').value = img.src;
                                        }
                                    </script>


                                </p:outputPanel>
                            </p:dialog>
                            <p:dialog header="Respuestas Evaluación IPV" 
                                      widgetVar="respDialogIPV" modal="false" 
                                      showEffect="fade" hideEffect="fade" 
                                      resizable="false" width="800" height="400"
                                      >
                                <p:outputPanel id="respDetailIPV" style="text-align:center;" >
                                    <p:panelGrid  columns="2" rendered="#{not empty controller_Administrador.selectedPostulante}" columnClasses="label,value">
                                        <f:facet name="header">
                                            <h:outputText value="Detalle"/>

                                        </f:facet> 

                                        <h:outputText value="Id:" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.numid}" />

                                        <h:outputText value="AP Paterno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_paterno}" />

                                        <h:outputText value="AP Materno" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.ap_materno}" />
                                        <h:outputText value="Nombre Completo" />
                                        <h:outputText value="#{controller_Administrador.selectedPostulante.nombres}" />

                                        <h:outputText value="TOTAL PRUEBA: " style="font-weight: bold; font-size: 16px;" rendered="false" />
                                        <h:outputText value="#{controller_Administrador.total_prueba}" 
                                                      style="font-weight: bold; font-size: 18px; color: blue;" rendered="false"/>

                                    </p:panelGrid>

                                    <p:panelGrid columns="2">
                                        <p:commandButton actionListener="#{controller_Administrador.action_verRespuestasIPVPDF()}" 
                                                         value="Generar Informe de Respuestas en formato PDF "
                                                         update="@form @widgetVar(dlgPDFRespIPV)" 
                                                         title="Ver PDF" 
                                                         icon="ui-icon-search"
                                                         >
                                        </p:commandButton>
                                    </p:panelGrid>


                                </p:outputPanel>
                            </p:dialog>

                        </h:form>

                        <div style="overflow-x:hidden; width: 1px; height: 1px;">
                            <ui:insert name="header">
                                <ui:include src="dialog_Nuevo_Postulante.xhtml" />
                            </ui:insert>
                            <ui:insert name="header">
                                <ui:include src="dialog_RespuestasPDF.xhtml" />
                            </ui:insert>
                            <ui:insert name="header">
                                <ui:include src="dialog_EvaluacionPDF.xhtml" />
                            </ui:insert>
                            <ui:insert name="header">
                                <ui:include src="dialog_EvaluacionIPVPDF.xhtml" />
                            </ui:insert>
                            <ui:insert name="header">
                                <ui:include src="dialog_RespuestasIPV_PDF.xhtml" />
                            </ui:insert>
                        </div>


                    </p:layoutUnit>

                    <p:layoutUnit position="south" size="30"  resizable="true" closable="true" collapsible="true">
                        <div>
                            <h:outputText value="Corporación Farmacéutica ([Calidad], [Responsabilidad], [Eficiencia], [Reciprocidad]), "></h:outputText>
                            <h:outputText value="COFAR Copyright © 2016." style="color: blue;"></h:outputText>

                        </div>
                    </p:layoutUnit>

                </p:layout>

            </p:outputPanel>
            <p:growl autoUpdate="true" showDetail="false" showSummary="true" id="messages" ></p:growl>
            <ui:insert name="status" >
                <p:ajaxStatus style="width:64px;height:64px;position:fixed;right:5px;bottom:5px"
                              >
                    <f:facet name="start">
                        <p:graphicImage url="../img/loading.gif" />
                    </f:facet>

                    <f:facet name="complete">
                        <h:outputText value="" />
                    </f:facet>
                </p:ajaxStatus>
            </ui:insert>


        </h:body>
    </f:view>
</html>
